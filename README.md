# Curriculum-Design-2

##Description

###1、电机控制
    采用四路PWM控制四个地盘电机，电机驱动：L298n ，地盘电机：带减速箱的直流电机

    板2定时器0控制四个IO口发出PWM脉冲。

    改进：收到新的速度值时，经一系列计算后转换成PWM周期值，后对当前PWM周期与新周期值进行判断，若大于新设定值，则下一个PWM周期才更新周期值，反之，则不处理。防止速度突变。若控制周期很短时，其影响可忽略。
    
###2、速度监测
    使用光电门对地盘电机进行速度监控，由INT0(配置为下降沿触发)进行计数，未使用计数器(定时器已用完)。
    
####速度检测值处理：
    采用滑动滤波方法(滑动长度为5)，减弱由光电门不稳定造成的计数尖峰影响，但是速度值在读取周期小的时候仍不稳定。
    
####滤波后效果仍不太理想原因分析：
    1、硬件问题：光电门采用一个发光二极管和基极光感三极管构成，其中基极光感三极管响应有延时，故光电门的检测频率不能太高。
    2、软件问题：由于没有用计数器来采集脉冲，而是用外部中断来代替，通过下降沿来技术，速度高的时候，进中断频率过高，导致程序不稳定，计数出错。(通过与计数器方式比较)
